'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};Object.defineProperty(exports,'__esModule',{value:!0});exports.normalizeAttrs=normalizeAttrs,exports.default=html;var _utils=require('./utils'),DEF_NS='props',DEF_MODS=['hook','on','style','class','props','attrs','dataset'],SVG_NS='http://www.w3.org/2000/svg';function normalizeAttrs(a){function b(a,b,d){var e=c[a]||{};e[b]=d,c[a]=e}var c={};for(var d in a)if(DEF_MODS.includes(d))c[d]=a[d];else if('key'!=d&&'classNames'!=d&&'selector'!=d){var e=d.indexOf('-');if(-1!==e){var f=d.substring(0,e),g=d.substring(e+1);b(f,g,a[d])}else c[d]||b(DEF_NS,d,a[d])}return c}function buildFromStringTag(a,b,c){if(b.selector&&''!==b.selector&&(a+=b.selector),b.classNames&&(Array.isArray(b.classNames)&&0!==b.classNames.length||''!==b.classNames)){var d=b.classNames;a=a+'.'+(Array.isArray(d)?d.join('.'):d.replace(/\s+/g,'.'))}return{sel:a,data:normalizeAttrs(b),children:c.map(function(a){return(0,_utils.isPrimitive)(a)?{text:a}:a}),key:b.key}}function buildFromComponent(a,b,c){var d,e=(0,_utils.isClass)(a),f=(0,_utils.isFunc)(a),g=(0,_utils.isObj)(a)&&'function'==typeof a.render;if(e){d=new a(b,c).render()}else if(g)d=a.render(b,c);else if(f)d=a(b,c);else throw console.error('JSX tag error: tag =',a,', attrs =',b,', children =',c),new Error('JSX tag must be either a \'string\', a \'function\' or\n      an \'object\'/a \'class\' with either a \'view\' or a \'render\' method.');return d&&(d.key=b.key),d}function mapPropsToAttrs(a){var b=a.attrs||(a.attrs={}),c=a.props||(a.props={});for(var d in c)void 0===b[d]&&(b[d]=c[d],delete c[d]);return a.attrs=b,0<Object.keys(c).length?a.props=c:delete a.props,a}function addNSAndAttrs(a){var b=a.data||{};if(b.ns=SVG_NS,a.data=mapPropsToAttrs(b),'foreignObject'!==a.sel)for(var c=0;c<a.children.length;c++)addNSAndAttrs(a.children[c])}function buildVnode(a,b,c){if(c=(0,_utils.tryFlatten)(c),'string'==typeof a){var d=buildFromStringTag(a,b,c),e=d.sel;return(0,_utils.isSvg)(e)&&addNSAndAttrs(d),d}return buildFromComponent(a,b,c)}function html(a,b,c){if(b=b||{},c=c||[],'object'!==('undefined'==typeof b?'undefined':_typeof(b)))throw console.error('JSX attrs error: tag =',a,', attrs =',b,', children =',c),new Error('JSX attrs must be of type \'object\'.');return(3<arguments.length||!Array.isArray(c))&&(c=Array.prototype.slice.call(arguments,2)),buildVnode(a,b,c)}
//# sourceMappingURL=jsx.js.map